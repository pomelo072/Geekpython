# Day 3

- 高级特性
  - 切片
  - 迭代
  - 列表生成式
  - 生成器
  - 迭代器
- 函数式编程
- 模块

---

## 高级特性

### 切片

- 使用切片操作符`listname[start : end : step]`获取元素。
- 切片可以对`list`、`tuple`、`字符串`进行操作。

### 迭代

- 在Python中，迭代通过`for...in...`实现。
- 迭代`dict`：
  - 迭代`key`：`for key in dict`
  - 迭代`value`：`for value in dict.values()`
  - 同时迭代：`for key,value in dict.items()`
- 使用`collection`模块中的`Iterable`判断对象是否可迭代。
- 使用Python内置的`enumerate`函数可以把一个list变成索引-元素对，这样就可以在`for`循环中同时迭代索引和元素本身。

### 列表生成式

- 使用`list = [生成元素表达式  生成元素条件式]`生成一个`list`。
- 条件式可以多层，表达式可以有多个变量，或是函数。

### 生成器generator

- 通过某种算法在循环过程中得出元素，一边循环一边计算。可以用`next()`调用下一个值。
  - 把列表生成式的`[]`改成`()`,使用`for`调用元素。
  - 一个函数定义中包含`yield`关键字，那么这个函数就不再是一个普通函数，而是一个generator。但是用for循环调用generator时，发现拿不到generator的return语句的返回值。如果想要拿到返回值，必须捕获`StopIteration`错误，返回值包含在`StopIteration`的`value`中。

### 迭代器Iterator

- 凡是可作用于for循环的对象都是Iterable类型；凡是可作用于next()函数的对象都是Iterator类型。
- 集合数据类型如`list`、`dict`、`str`等是`Iterable`但不是`Iterator`，不过可以通过`iter()`函数获得一个`Iterator`对象。

---

## 函数式编程

### 高阶函数

函数也可以作为参数传入另一个函数，这样的函数叫高阶函数。

#### map/reduce

- `map(function,Iterable)`：`map()`函数接收两个参数，一个是函数，一个是`Iterable`，`map`将传入的函数依次作用到序列的每个元素，并把结果作为新的`Iterator`返回。
- `reduce()`把一个函数作用在一个序列[x1, x2, x3, ...]上，这个函数必须接收两个参数，`reduce`把结果继续和序列的下一个元素做累积计算。

#### filter

- `filter()`用作过滤序列。接收一个函数和一个序列。和`map()`不同的是，filter()把传入的函数依次作用于每个元素，然后根据返回值是`True`还是`False`决定保留还是丢弃该元素。
- `filter()`函数返回的是一个`Iterator`，也就是一个惰性序列，所以要强迫`filter()`完成计算结果，需要用`list()`函数获得所有结果并返回list。

#### sorted

- `sorted(list, key=function[, reverse=True])`函数就可以对list进行排序。通过`key=function`传入函数可以使`list`中的每个元素都作用于函数，`reverse`实现反向排序。

### 返回函数

高阶函数除了可以接受函数作为参数外，还可以把函数作为结果值返回。相关参数和变量都保存在返回的函数中，这种称为闭包[^warning]。一定要引用循环变量：再创建一个函数，用该函数的参数绑定循环变量当前的值，无论该循环变量后续如何更改，已绑定到函数参数的值不变。

### 匿名函数

- 关键字`lambda x:表达式`表示匿名函数，冒号前面的x表示函数参数。
- 匿名函数有个限制，就是只能有一个表达式，不用写return，返回值就是该表达式的结果。用匿名函数有个好处，因为函数没有名字，不必担心函数名冲突。此外，匿名函数也是一个函数对象，也可以把匿名函数赋值给一个变量，再利用变量来调用该函数。
- 匿名函数可以作为返回值返回。

### 偏函数

- 当函数的参数个数太多，需要简化时，使用`functools.partial`可以创建一个新的函数，这个新函数可以固定住原函数的部分参数，从而在调用时更简单。
- 创建偏函数时，可以接收函数对象、`*args`和`**kw`这3个参数。

### 装饰器



---

## 模块

每一个包目录下面都会有一个`__init__.py`的文件，这个文件是必须存在的，否则，Python就把这个目录当成普通目录，而不是一个包。`__init__.py`可以是空文件，也可以有Python代码。
- 模块名要遵循Python变量命名规范，不要使用中文、特殊字符；
- 模块名不要和系统模块名冲突，最好先查看系统是否已存在该模块，检查方法是在Python交互环境执行import abc，若成功则说明系统存在此模块。

### 使用模块
- `import module1[, module2[,... moduleN]`：导入整个模块包
- `from modname import name1[, name2[, ... nameN]]`：导入模块包中的某个模块




---

2019年11月20日

李子夏

[warning]:返回函数不要引用任何循环变量，或者后续会发生变化的变量